<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ìš°ë¦¬ ê°€ì¡± ëŒ€í™” ì¹´ë“œê²Œì„ ğŸ’š</title>

<style>
body {
  font-family: 'Pretendard', sans-serif;
  background: #fafafa;
  color: #222;
  margin: 0;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
  padding: 20px;
}
h1 { font-size: 26px; color: #2c2c2c; margin-top: 10px; }
#announcement {
  display: none;
  background: #3fa76a;
  color: white;
  padding: 10px 16px;
  border-radius: 8px;
  margin-top: 10px;
  font-weight: 600;
  font-size: 15px;
  white-space: pre-line;
}
input {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  margin: 5px;
  font-size: 16px;
}
button {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  background: #333;
  color: white;
  font-size: 15px;
  margin: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
}
button:hover { background: #111; transform: translateY(-2px); }
#game { display: none; flex-direction: column; align-items: center; margin-top: 10px; }

/* âœ… ì¹´ë“œ ì´ë¯¸ì§€ ìˆ˜ì • */
.card {
  perspective: 1000px;
  width: 320px;
  height: 480px;
  margin: 20px auto;
  position: relative;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  background: linear-gradient(rgba(255,255,255,0.96), rgba(255,255,255,0.96)),
    url('https://readmestudio.github.io/family-card-game/assets/card-bg.png')
    center/cover no-repeat;
}
.card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transition: transform 0.8s ease;
  transform-style: preserve-3d;
}
.flipped .card-inner { transform: rotateY(180deg); }

.card-front, .card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 20px;
  border: 2px solid #333;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: rgba(255,255,255,0.96);
}
.card-front {
  background: linear-gradient(rgba(255,255,255,0.96), rgba(255,255,255,0.96)),
    url('https://readmestudio.github.io/family-card-game/assets/heart.png')
    center 100px/80px no-repeat;
  font-size: 18px;
  color: #444;
}
.card-back {
  transform: rotateY(180deg);
  padding: 24px;
  box-sizing: border-box;
  overflow-y: auto;
}
.question-main {
  font-size: 18px;
  line-height: 1.5;
  white-space: pre-line;
  margin-top: 20px;
}
.sub-question {
  color: #777;
  font-size: 14px;
  margin-top: 10px;
  white-space: pre-line;
}
.buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 6px;
}
#status { font-weight: 600; margin-bottom: 8px; }

/* âœ… ëª¨ë°”ì¼ ëŒ€ì‘ */
@media (max-width: 480px) {
  .card { width: 90vw; height: 70vh; }
  h1 { font-size: 22px; }
  .question-main { font-size: 16px; }
  .sub-question { font-size: 13px; }
}
</style>
</head>

<body>
<h1>ìš°ë¦¬ ê°€ì¡± ëŒ€í™” ì¹´ë“œê²Œì„ ğŸ’š</h1>

<div id="setup">
  <p>ì°¸ê°€ì ì´ë¦„ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì„œ ì…ë ¥í•˜ì„¸ìš”</p>
  <input type="text" id="names" placeholder="ì˜ˆ: ì•„ë¹ , ì—„ë§ˆ, ì•„ë“¤" />
  <br />
  <button onclick="startGame()">ì‹œì‘í•˜ê¸° â–¶ï¸</button>
</div>

<div id="game">
  <div id="status"></div>
  <div id="announcement"></div>

  <div class="card" id="card">
    <div class="card-inner" id="card-inner">
      <div class="card-front">
        <p>ì§ˆë¬¸ì„ ë½‘ì•„ ì£¼ì„¸ìš” ğŸ’¬</p>
      </div>
      <div class="card-back">
        <div class="question-main" id="main-question"></div>
        <div class="sub-question" id="sub-question"></div>
      </div>
    </div>
  </div>

  <div class="buttons">
    <button onclick="drawQuestion()">ì§ˆë¬¸ ë½‘ê¸° ğŸ´</button>
    <button onclick="nextPerson()">ë‹¤ìŒ ì‚¬ëŒ â–¶ï¸</button>
    <button onclick="endRound()">ë§ˆë¬´ë¦¬í•˜ê¸° ğŸ’«</button>
  </div>
</div>

<script>
/* âœ… ì§ˆë¬¸ ë°°ì—´ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ */
const questions = [...(ì‚¬ìš©ìê°€ ì œê³µí•œ 100ë¬¸í•­ ë°°ì—´ ê·¸ëŒ€ë¡œ ìœ ì§€)...];

let players = [];
let currentPlayer = 0;
let usedQuestions = new Set();

function startGame() {
  const input = document.getElementById("names").value.trim();
  if (!input) return alert("ì°¸ê°€ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
  players = input.split(",").map(n => n.trim()).filter(n => n);
  if (players.length === 0) return alert("í•œ ëª… ì´ìƒ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");
  document.getElementById("setup").style.display = "none";
  document.getElementById("game").style.display = "flex";
  showCurrentPlayer();
}

function showCurrentPlayer() {
  const status = document.getElementById("status");
  status.innerText = `ğŸ’š ${players[currentPlayer]} ë‹˜ ì°¨ë¡€ì…ë‹ˆë‹¤!`;
}

function drawQuestion() {
  const card = document.getElementById("card");
  card.classList.add("flipped");
  const main = document.getElementById("main-question");
  const sub = document.getElementById("sub-question");

  if (usedQuestions.size >= 99) usedQuestions.clear();
  let index;
  do { index = Math.floor(Math.random() * 99); }
  while (usedQuestions.has(index));
  usedQuestions.add(index);

  const q = questions[index];
  main.innerText = q[0];
  sub.innerText = q[1];
  document.getElementById("announcement").style.display = "none";
}

function nextPerson() {
  document.getElementById("card").classList.remove("flipped");
  currentPlayer = (currentPlayer + 1) % players.length;
  showCurrentPlayer();
  document.getElementById("announcement").style.display = "none";
}

function endRound() {
  const main = document.getElementById("main-question");
  const sub = document.getElementById("sub-question");
  const card = document.getElementById("card");
  card.classList.add("flipped");

  const finalQ = questions[99];
  main.innerText = finalQ[0];
  sub.innerText = finalQ[1];

  document.getElementById("status").innerText = "";
  const ann = document.getElementById("announcement");
  ann.innerText = "ğŸ’« ì´ ì§ˆë¬¸ì€ ëª¨ë“  ì°¸ê°€ìê°€ ëŒì•„ê°€ë©° ëŒ€ë‹µí•´ ì£¼ì„¸ìš” ğŸ’«";
  ann.style.display = "block";
}
</script>
</body>
</html>
